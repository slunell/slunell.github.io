<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>Polygons</title>

    <script src="js/three.js"></script>
    <script src="js/OrbitControls.js"></script>
    <style>
        #main {
            overflow: hidden;
        }

    </style>
</head>

<body>
    <div id="main"></div>

    <script>
        var WIDTH = window.innerWidth;
        var HEIGHT = window.innerHeight;
        var ASPECT = WIDTH / HEIGHT;

        var scene, camera, renderer, controls;
        var polygons = [];

        function init() {
            // create a WebGL renderer inside an existing dom element (id=main)
            renderer = new THREE.WebGLRenderer();
            renderer.setClearColor(new THREE.Color('white'));
            renderer.setSize(WIDTH, HEIGHT);

            document.getElementById("main").appendChild(renderer.domElement);

            scene = new THREE.Scene();

            // Add camera
            camera = new THREE.PerspectiveCamera(45, ASPECT, 1, 10000);
            scene.add(camera);
            // the camera starts at 0,0,0, so pull it back
            camera.position.set(15, 25, 60);

            // Move camera around
            controls = new THREE.OrbitControls(camera, renderer.domElement);

            // Main part of the code
            var num_shapes = 50;
            for (var i = 0; i < num_shapes; i++) {
                var polygon = createShape();
                polygon.position.x = randX();
                polygon.position.z = randZ();
                polygon.rotation.y = randRotation();
                polygons.push(polygon);
            }

            renderer.render(scene, camera);
            animate();
        }

        // Random radian value
        function randRotation() {
            return Math.random() * (2 * Math.PI);
        }

        function randX() {
            return Math.random() * (2 - (1)) + (1);
        }

        function randZ() {
            return Math.random() * (30);
        }

        function createShape() {
            var pts = [];

            // Create shape
            pts = [];
            pts.push(new THREE.Vector2(0, 9));
            pts.push(new THREE.Vector2(6, 9));
            pts.push(new THREE.Vector2(9.5, 4.5));
            pts.push(new THREE.Vector2(4, 4.5));

            var shape = new THREE.Shape(pts);

            // Amount parameter is the thickness.
            var geom = new THREE.ExtrudeGeometry(shape, {
                amount: 0.05,
                bevelEnabled: false
            });

            var material = new THREE.MeshBasicMaterial({
                color: '#f77474',
                opacity: 0.5,
                transparent: true
            });

            var polygon = new THREE.Mesh(geom, material);

            scene.add(polygon);
            return polygon;
        }


        function animate() {
            requestAnimationFrame(animate);

            renderer.render(scene, camera);
        }

        init();

    </script>
</body>

</html>
